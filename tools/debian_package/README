How to create a Debian package (deb)

TODO: Create script(s) and general improvements
TODO: Support older Ubuntu releases than 13.10 'Saucy', use 'tools/linux/*.sh'


Sources for instructions
	https://help.launchpad.net/Packaging/PPA
	http://askubuntu.com/questions/161155/how-to-create-a-ppa-for-c-program/161212#161212
	http://faceted.wordpress.com/2011/05/18/howto-build-a-trivial-debian-package-with-dh_make/
	http://developer.ubuntu.com/publish/apps/other-forms-of-submitting-apps/ppa/


Install necessary packages
	> sudo apt-get install build-essential devscripts ubuntu-dev-tools \
	debhelper dh-make patch cdbs quilt gnupg fakeroot lintian pbuilder piuparts


[Optional for local testing] Be able to sign the package
	Create a launchpad account
	https://launchpad.net

	Setup your gpg-key & ssh-key
	https://help.launchpad.net/YourAccount/ImportingYourPGPKey
	https://help.launchpad.net/YourAccount/CreatingAnSSHKeyPair


Create the source (far from optimal)
	Go to the Chaotic Rage source root folder
	Create the file 'chaoticrage-<version>.orig.tar.xz'
	> make dist
	Use the file as source (creating tmp folders and moving the file)
	> mkdir ../deb_tmp && \
	cp chaoticrage_* ../deb_tmp && \
	cd ../deb_tmp && \
	tar xpvf chaoticrage_* && \
	cd chaoticrage-*


Prepare for building the package
	Set DEBEMAIL and DEBFULLNAME (optional - add these to '~/.bashrc')
	(must be the same as the gpg key (command: 'gpg --list-keys'))
		> export DEBEMAIL=<email address>
		> export DEBFULLNAME="Full Name"
	[Only the first time, overwrites e.g. the changelog] Prepare Debian packaging for an original source archive
		> dh_make --copyright gpl2 --single --native
	Replace and edit the 'control' file
		> cp ../../chaotic-rage/tools/debian_package/debian/control debian/control
		Update maintainer (name and email)
		> editor debian/control
	Copy the 'install' file which decides which files to install and where
		> cp ../../chaotic-rage/tools/debian_package/debian/chaoticrage.install debian/
	Update changelog (two alternatives)
		Do not change version number (use this for first build)
		> dch --edit
		Or increase the Debian release number
		> dch --increment

		Note: Launchpad rejects the PPA upload if distribution is 'unstable',
		change to wanted target (Ubuntu version), e.g. 'trusty'.
	[Optional] Clean extra/example files
		> rm debian/*.ex debian/*.EX


Build package
	> debuild
	The Debian package is now ready to be installed


Build for Personal Package Archive (PPA)
	Brand new package with no existing version in Ubuntu's repositories
	(will be uploaded with the .orig.tar.gz file)
		> debuild -S -sa
	Alternative version of an existing package
	(will be uploaded without the .orig.tar.gz file)
		> debuild -S -sd


Test building locally
	pbuilder allows you to build packages locally on your machine. The build
	will be done in a minimal and clean environment. And possible to set up
	multiple instances for various Ubuntu and Debian releases.

	Set up pbuilder (only needed once per release)
	> pbuilder-dist <release> create
	Build a test package
	> pbuilder-dist <release> build ../<package>_<version>.dsc


Upload to PPA
	dput ppa:<username>/chaoticrage ../chaoticrage_<version>ubuntu<build number>_source.changes
