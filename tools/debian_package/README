How to create a Debian package (deb)

TODO: Create script(s) and general improvements


Sources for instructions
	https://help.launchpad.net/Packaging/PPA
	http://askubuntu.com/questions/161155/how-to-create-a-ppa-for-c-program/161212#161212
	http://faceted.wordpress.com/2011/05/18/howto-build-a-trivial-debian-package-with-dh_make/


Install necessary packages
	> sudo apt-get install build-essential devscripts ubuntu-dev-tools \
	debhelper dh-make patch cdbs quilt gnupg fakeroot lintian pbuilder piuparts


[Optional for local testing] Be able to sign the package
	Create a launchpad account
	https://launchpad.net

	Setup your gpg-key & ssh-key
	https://help.launchpad.net/YourAccount/ImportingYourPGPKey
	https://help.launchpad.net/YourAccount/CreatingAnSSHKeyPair


Create the source (far from optimal)
	Go to the Chaotic Rage source root folder
	Create the file 'chaoticrage-<version>.orig.tar.xz'
	> make deb
	Use the file as source (creating tmp folders and moving the file)
	> mkdir ../deb_tmp && \
	cp chaoticrage_* ../deb_tmp && \
	cd ../deb_tmp && \
	tar xpvf chaoticrage_* && \
	cd chaoticrage-*


Getting ready for building the package
	Set DEBEMAIL and DEBFULLNAME (optional - add these to '~/.bashrc')
	(must be the same as the gpg key (command: 'gpg --list-keys'))
		> export DEBEMAIL=<email address>
		> export DEBFULLNAME="Full Name"
	Prepare Debian packaging for an original source archive
		> dh_make --copyright gpl2 --single --native
	Replace and edit the 'control' file
		> cp ../../chaotic-rage/tools/debian_package/debian/control debian/control
		Update maintainer (name and email)
		> editor debian/control
	Copy the 'install' file which decides which files to install and where
		> cp ../../chaotic-rage/tools/debian_package/debian/chaoticrage.install debian/
	Update changelog (two alternatives)
		Do not change version number (use this for first build)
		> dch --edit
		Or increase the Debian release number
		> dch --increment

		Note: Launchpad rejects the PPA upload if distribution is 'unstable',
		change to wanted target (Ubuntu version), e.g. 'trusty'. Code name for
		installed Ubuntu version: 'cat /etc/lsb-release'.
	[Optional] Clean extra/example files
		> rm debian/*.ex debian/*.EX


Build package
	> debuild
	The Debian package is now ready to be installed


Building for Personal Package Archive (PPA)
	Brand new package with no existing version in Ubuntu's repositories
	(will be uploaded with the .orig.tar.gz file)
		> debuild -S -sa
	Alternative version of an existing package
	(will be uploaded without the .orig.tar.gz file)
		> debuild -S -sd


Uploading to PPA
	dput ppa:<username>/chaoticrage ../chaoticrage_<version>ubuntu<build number>_source.changes
